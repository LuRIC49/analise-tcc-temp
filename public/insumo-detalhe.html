<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Insumo</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/modalstyle.css">
    <link rel="stylesheet" href="css/insumostyle.css">
    <link rel="stylesheet" href="css/insumo-detalhe.css">
</head>
<body>
    <header class="header"></header>

    <main class="main-content">
        <div class="detail-container">
            <div class="detail-panel">
                <div class="detail-image">
                    <img id="insumo-image" src="images/logotipo.png" alt="Imagem do Insumo">
                </div>
                <div class="detail-info">
                    <p><strong>Tipo de Insumo:</strong> <span id="insumo-tipo">...</span></p>
                    <p id="serial-display-row" style="display: none;"><strong>Nº Serial:</strong> <span id="insumo-serial">...</span></p>
                    <p><strong>Localização:</strong> <span id="insumo-local">...</span></p>
                    <p><strong>Data de Validade:</strong> <span id="insumo-validade">...</span></p>
                    <p><strong>Descrição Adicional:</strong></p>
                    <p id="insumo-descricao" class="description-box">...</p>
                </div>
            </div>

            <div class="detail-actions">
                <button id="btnVoltar" class="btn-secondary">Voltar</button>
                <button id="btnVerHistorico" class="btn-info">Ver Histórico</button>
                <button id="btnExcluir" class="btn-danger">Excluir</button>
                <button id="btnEditar" class="btn-primary">Editar</button>
            </div>
        </div>
    </main>

    <div id="editModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 id="editModalTitle">Editar Insumo</h2>
            <form id="editForm">
                <input type="hidden" id="edit-insumo-codigo" name="insumo_codigo">
                <input type="hidden" id="edit-filial-cnpj" name="filial_cnpj">

                <div class="form-group" id="edit-serial-group" style="display: none;">
                    <label for="edit-serial">Nº Serial:</label>
                    <input type="text" id="edit-serial" name="numero_serial" list="serial-list-edit" autocomplete="off">
                </div>

                <datalist id="serial-list-edit"></datalist>

                <div class="form-group">
                    <label for="edit-local">Localização:</label>
                    <input type="text" id="edit-local" name="local">
                </div>
                <div class="form-group">
                    <label for="edit-validade">Data de Validade:</label>
                    <input type="date" id="edit-validade" name="validade">
                </div>
                <div class="form-group">
                    <label for="edit-descricao">Descrição Adicional:</label>
                    <textarea id="edit-descricao" name="descricao" rows="3" maxlength="255"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel">Cancelar</button>
                    <button type="submit" class="btn-save">Salvar Alterações</button>
                </div>
            </form>
            <button class="modal-close-btn">&times;</button>
        </div>
    </div>



        <div id="historyModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 800px;"> <h2>Histórico de Alterações</h2>
            <div id="historyModalBody" style="max-height: 60vh; overflow-y: auto;">
                <p>Carregando histórico...</p>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" id="historyModalCloseBtn">Fechar</button>
            </div>
            <button class="modal-close-btn" id="historyModalCloseXBtn">&times;</button>
        </div>
    </div>




    <div id="confirmExcluirInsumoModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 id="confirmDeleteTitle">Confirmar Exclusão</h2> 
            <p id="confirmDeleteText" style="text-align: center; margin-bottom: 25px;">
                Tem certeza que deseja excluir este insumo?
            </p>
            <div class="modal-actions" style="justify-content: center;">
                <button type="button" class="btn-cancel" id="confirmExcluirInsumoCancelBtn">Cancelar</button>
                <button type="button" id="confirmExcluirInsumoConfirmBtn" class="btn-save">Confirmar Exclusão</button> 
            </div>
            <button class="modal-close-btn" id="confirmExcluirInsumoCloseBtn">&times;</button>
        </div>
    </div>

    <footer class="footer"></footer>

    <script src="js/layout.js" defer></script>
    <script src="js/auth.js" defer></script>
    <script src="js/notifier.js" defer></script>
    <script src="/js/utils/validation.js"></script>
    <script src="js/insumo-detalhe.js" defer></script>
</body>
</html>